### 路由钩子怎么用？

**关键技术**: 全局前置守卫beforEach + 动态添加路由 

- 判断是否有token 

- - 没有token, 判断请求是否是白名单路由: 

- - - 是: 直接放行 
    - 不是: 强制跳转到login页面 

- - 有token, 判断请求的是否是login页面 

- - - 是: 强制跳转到根路由 
    - 不是, 判断是否已经登陆? 

- - - - 已登陆: 放行 
      - 没有登陆: 

- - - - - 请求获取用户相关信息数据: name/avatar/路由的权限数据和按钮的权限数据 

- - - - - - 请求成功了: 

- - - - - - - 将用户相关数据保存到vuex中 
            - 根据路由权限数据动态生成权限路由的数组 
            - 将所有的权限路由和匹配任意路由的路由动态添加到router中 

- - - - - - 请求失败了: 

- - - - - - - 删除cookie中和token 
            - 删除vuex中用户相关信息 
            - 强制跳转到登陆页面